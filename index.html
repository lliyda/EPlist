<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no,viewport-fit=cover" />
    <title>AK/EP åŸç‰ˆå¤åˆ» (v5.0)</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vant@2.12/lib/index.css" />

    <style>
        /* ============================================================
           1. åŸºç¡€æ ·å¼ (æ¥è‡ª base.css)
           ============================================================ */
        body, html { height: 100%; background-color: #f5f5f5; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        * { box-sizing: border-box; }
        [v-cloak] { display: none; }

        /* ============================================================
           2. ç»„ä»¶æ ·å¼ (æ¥è‡ª vue-component.css)
           ============================================================ */
        .SpecialShapedLayout3 { position: relative; }
        .SpecialShapedLayout3 .bg { position: absolute; top: 0; right: 0; bottom: 0; left: 0; }
        .SpecialShapedLayout3 .bg::before { content: ""; position: absolute; top: 0; left: 0; width: 60%; height: 50%; background-image: linear-gradient(90deg, #00C0F2 0%, #BFFC85 100%); border-bottom-right-radius: 100px; opacity: 0.1; }
        
        .CustomButton { user-select: none; -webkit-tap-highlight-color: transparent; }
        .CustomButton .custom-content {
            font-size: 16px; font-weight: 400; line-height: 22px; color: #fff;
            background-image: linear-gradient(90deg, #00C0F2 0%, #BFFC85 100%);
            border-radius: 999px; position: relative; display: flex; align-items: center; justify-content: center;
            height: 45px; /* é»˜è®¤é«˜åº¦ */
            box-shadow: 0 4px 10px rgba(0, 192, 242, 0.3);
        }
        .CustomButton:active .custom-content { opacity: 0.9; transform: scale(0.98); }

        .TopBack { position: relative; z-index: 1; display: flex; align-items: center; justify-content: space-between; height: 44px; background: #fff; padding: 0 15px; border-bottom: 1px solid #ebedf0; }
        .TopBack .icon { font-size: 20px; color: #333; }
        .TopBack .title { font-size: 17px; font-weight: 500; position: absolute; left: 50%; transform: translateX(-50%); }

        /* ============================================================
           3. è¯¦æƒ…é¡µä¸“ç”¨æ ·å¼ (æ¥è‡ª ep.list.detail.css)
           ============================================================ */
        .ep-list-detail {
            flex-grow: 1; background-color: #f5f5f5; display: flex; flex-direction: column; padding: 20px;
        }
        
        /* æ¨¡æ‹Ÿ SpecialShapedLayout3 å†…éƒ¨ç»“æ„ */
        .ep-list-detail .SpecialShapedLayout3 {
            background-color: #fff; border-radius: 12px; padding: 20px; margin-bottom: 30px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.03); position: relative; overflow: hidden;
        }

        .ep-list-detail .top {
            display: flex; flex-direction: column; align-items: center; margin-bottom: 20px; position: relative; z-index: 2;
        }
        .ep-list-detail .top .avatar {
            width: 50px; height: 50px; border-radius: 50%; background-color: #eee; margin-bottom: 8px; border: 2px solid #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .ep-list-detail .top .user-name { font-size: 14px; color: #666; }

        .ep-list-detail .count {
            font-size: 36px; font-weight: bold; text-align: center; color: #00C0F2; margin-bottom: 30px; position: relative; z-index: 2;
        }

        .ep-list-detail .list { display: flex; flex-direction: column; row-gap: 16px; position: relative; z-index: 2; }
        .ep-list-detail .list .item { display: flex; justify-content: space-between; align-items: center; font-size: 14px; }
        .ep-list-detail .list .item .label { color: #999; }
        .ep-list-detail .list .item .value { color: #333; font-weight: 500; }

        /* ============================================================
           4. åˆ—è¡¨é¡µç®€å•æ¨¡æ‹Ÿ (ç”¨äºè§¦å‘è„šæœ¬)
           ============================================================ */
        .EpList { padding: 15px; }
        .items .item { background: #fff; border-radius: 10px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .item .top { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; border-bottom: 1px dashed #eee; padding-bottom: 10px; }
        .item .avatar { width: 40px; height: 40px; border-radius: 50%; background: #eee; }
        .item .bottom { background: linear-gradient(90deg, #00C0F2 0%, #BFFC85 100%); color: #fff; padding: 5px 15px; border-radius: 20px; display: flex; justify-content: space-between; font-size: 12px; }
        .empty-tip { text-align: center; color: #999; padding-top: 50px; }

        /* æˆåŠŸé¡µæ¨¡æ‹Ÿ */
        #success-page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 1001; text-align: center; padding-top: 80px; }
        .ak-target-hit { border: 2px solid red !important; }
    </style>
</head>

<body>
    <div id="app" v-cloak>
        
        <div class="EpList" v-show="!showDetail && !showSuccess">
            <van-pull-refresh v-model="isReloading" @refresh="onRefresh">
                 <div style="background:#fff3e0; color:#e65100; padding:8px; font-size:12px; text-align:center; margin-bottom:10px; border-radius:4px;">
                    åˆ·æ–°æ¬¡æ•°: <b>{{ refreshCount }}</b> <span v-if="refreshCount >= 4" style="color:green; font-weight:bold;">(ğŸ”¥ è®¢å•å‡ºç°!)</span>
                </div>
                
                <div class="items">
                    <div v-if="list.length === 0" class="empty-tip">æš‚æ— æŒ‚å•æ•°æ® (ä¸‹æ‹‰åˆ·æ–°)</div>
                    <div class="item" v-for="item in list" :key="item.Id" @click="gotoDetail(item)">
                        <div class="top"><div class="avatar"></div><div class="name">{{ item.Seller.FlowNumber }}</div></div>
                        <div class="bottom"><div>{{ item.EPAmount }} EP</div><div>{{ item.CreateTime }}</div></div>
                    </div>
                </div>
            </van-pull-refresh>
        </div>

        <div id="detail-page" v-if="showDetail" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#f5f5f5;z-index:999;display:flex;flex-direction:column;">
            
            <div class="TopBack">
                <van-icon name="arrow-left" class="icon" @click="closeDetail"></van-icon>
                <div class="title">{{ language.TITLE_TEXT }}</div>
                <div style="width:20px"></div>
            </div>

            <div class="ep-list-detail">
                
                <div class="SpecialShapedLayout3">
                    <div class="bg"></div> <div class="top">
                        <div class="avatar"></div> <div class="user-name">{{ currentItem.Seller.FlowNumber }}</div>
                    </div>

                    <div class="count">{{ currentItem.EPAmount }}</div>

                    <div class="list">
                        <div class="item">
                            <span class="label">{{ language.LI_1_TEXT }}</span>
                            <span class="value">{{ currentItem.Netincome }} USDT</span>
                        </div>
                        <div class="item">
                            <span class="label">{{ language.LI_2_TEXT }}</span>
                            <span class="value">EP{{ currentItem.Id }}</span>
                        </div>
                        
                        <div class="item">
                            <span class="label">{{ language.LI_3_TEXT }}</span> <span class="value" :style="{ color: currentItem.Status === 1 ? '#00C0F2' : '' }">
                                {{ currentItem.StatusName }}
                            </span>
                        </div>

                        <div class="item">
                            <span class="label">{{ language.LI_4_TEXT }}</span>
                            <span class="value">{{ currentItem.CreateTime }}</span>
                        </div>
                    </div>
                    </div>

                <div class="CustomButton" style="margin: 0 25px;" @click="confirm">
                    <div class="custom-content">
                        {{ language.CONFIRM_BUTTON_TEXT }}
                    </div>
                </div>

            </div>
        </div>

        <div id="success-page" v-if="showSuccess">
             <van-icon name="checked" color="#07c160" size="80" style="margin-bottom:20px"></van-icon>
             <h3>æ¶å–®æˆåŠŸ</h3>
             <van-button plain @click="goBackToList">è¿”å›åˆ—è¡¨</van-button>
        </div>

        <van-dialog id="van-dialog"></van-dialog>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vant@2.12/lib/vant.min.js"></script>

    <script>
        // æ¨¡æ‹Ÿå…¨å±€å¯¹è±¡
        window.APP = { GLOBAL: { toastMsg: (msg) => vant.Toast(msg) } };

        new Vue({
            el: '#app',
            data: {
                // çŠ¶æ€æ§åˆ¶
                showDetail: false,
                showSuccess: false,
                isReloading: false,
                refreshCount: 0,
                
                // æ¨¡æ‹Ÿæ•°æ®å¯¹è±¡ (PageModel)
                currentItem: {
                    Id: 0, EPAmount: 0, Netincome: 0, Status: 1, 
                    StatusName: '', CreateTime: '', Seller: { FlowNumber: '' }
                },
                list: [],

                // è¯­è¨€åŒ… (ç…§æ¬æºç å˜é‡å)
                language: {
                    TITLE_TEXT: 'å‡ºå”®è©³æƒ…',
                    LI_1_TEXT: 'å®ä»˜é‡‘é¢',
                    LI_2_TEXT: 'äº¤æ˜“å•å·',
                    LI_3_TEXT: 'çŠ¶æ€', // <--- è¿™é‡Œå¯¹åº”â€œçŠ¶æ€â€
                    LI_4_TEXT: 'åˆ›å»ºæ—¶é—´',
                    CONFIRM_BUTTON_TEXT: 'ç¢ºèªè³¼è²·', // <--- è„šæœ¬è¯†åˆ«å…³é”®å­—
                    POPUP_TITLE_TEXT: 'è³¼è²·EPäº¤æ˜“ç¢ºèª',
                    POPUP_MESSAGE_TEXT: 'ç¡®è®¤è¦è´­ä¹°æ­¤è®¢å•å—ï¼Ÿ',
                    PASSWORD_DIALOG_CONFIRM: 'ç¢ºèª',
                    PASSWORD_DIALOG_CANCEL: 'å–æ¶ˆ'
                }
            },
            methods: {
                onRefresh() {
                    this.refreshCount++;
                    setTimeout(() => {
                        this.isReloading = false;
                        if (this.refreshCount >= 4) {
                            // æ¨¡æ‹Ÿä»åç«¯æ‹¿åˆ°çš„æ•°æ®
                            this.list = [{
                                Id: 123456,
                                EPAmount: 5000,
                                Netincome: 4600,
                                Status: 1, // 1å¯¹åº”è“è‰²
                                StatusName: 'å‡ºå”®ä¸­', // <--- è¿™é‡Œå¯¹åº”â€œå‡ºå”®ä¸­â€
                                CreateTime: '2025-12-20 12:00:00',
                                Seller: { FlowNumber: 'TestUser888' }
                            }];
                        } else {
                            this.list = [];
                        }
                    }, 300);
                },
                gotoDetail(item) {
                    this.currentItem = item;
                    this.showDetail = true;
                },
                closeDetail() {
                    this.showDetail = false;
                },
                confirm() {
                    // æ¨¡æ‹Ÿæºç ä¸­çš„å¼¹çª—é€»è¾‘
                    this.$dialog.confirm({
                        title: this.language.POPUP_TITLE_TEXT,
                        message: this.language.POPUP_MESSAGE_TEXT,
                        confirmButtonText: this.language.PASSWORD_DIALOG_CONFIRM,
                        cancelButtonText: this.language.PASSWORD_DIALOG_CANCEL
                    }).then(() => {
                        this.$toast.loading({ duration: 0, forbidClick: true, message: 'è¯·æ±‚ä¸­...' });
                        setTimeout(() => {
                            this.$toast.clear();
                            this.showDetail = false;
                            this.showSuccess = true;
                        }, 500);
                    }).catch(() => {});
                },
                goBackToList() {
                    this.showSuccess = false;
                    this.refreshCount = 0;
                    this.list = [];
                }
            },
            mounted() {
                this.onRefresh();
            }
        });
    </script>
</body>
</html>
